<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
  <script>
    /* ----------基本API-------- */
    /* //弱集合中的值只能是 Object 或者继承自 Object 的类型
    const val1 = { id: 1 },
      val2 = { id: 2 },
      val3 = { id: 3 };
    //使用数组初始化弱集合
    const ws1 = new WeakSet([val1, val2, val3]);
    console.log(ws1);
    console.log(ws1.has(val1)); //true
    console.log(ws1.has(val2)); //true
    console.log(ws1.has(val3)); //true
    //初始化是全有或全无的操作
    //只要有一个值无效就会抛出错误，导致整个初始化失败
    const ws2 = new WeakSet([val1, "BADVAL", val3]);
    // TypeError: Invalid value used in WeakSet
    typeof ws2;
    // ReferenceError: ws2 is not defined */

    /* //
    //------初始化后可用add()添加新值，has()查询，delete()删除
    const ws = new WeakSet();
    const val1 = { id: 1 },
      val2 = { id: 2 };
    console.log(ws.has(val1)); //false
    ws.add(val1).add(val2);
    console.log(ws.has(val1)); //true
    console.log(ws.has(val2)); //true
    ws.delete(val1); //只删除这一个值
    console.log(ws.has(val1)); //false
    console.log(ws.has(val2)); //true
     */

    /* ----------弱值-------------- */
    /* //
    const ws = new WeakSet();
    const container = {
      val: {},
    };
    ws.add(container.val);
    function removeReference() {
      container.val = null;
    }
     */

    /* ------------不可迭代值--------------- */

    /* -----------------使用弱集合--------------------- */
    
  </script>
</html>
